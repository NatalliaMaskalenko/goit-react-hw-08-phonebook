{"version":3,"sources":["redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","redux/services/contactApi.js","redux/Phonebook/phonebook-operation.js","redux/Phonebook/phonebook-actions.js","components/Container/Container.module.css","components/Navigation.js","components/UserMenu/UserMenu.js","components/AuthNav.js","components/AppBar.js","components/Container/Container.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/Phonebook/phonebook-reducer.js","redux/store.js","index.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","rejectWithValue","post","data","message","logIn","logOut","fetchCurrentUser","_","thunkAPI","state","getState","persistedToken","auth","get","console","log","operations","authSelectors","getIsLoggedIn","isLoggedIn","getUsername","user","name","getIsFetchingCurrent","isFetchingCurrentUser","authSlice","createSlice","initialState","email","extraReducers","authOperations","fulfilled","action","payload","fetchContactsAPI","addContactAPI","item","deleteContactsAPI","id","delete","fetchContacts","contacts","addContact","result","deleteContact","changeFilter","createAction","module","exports","styles","link","display","textDecoration","padding","fontWeight","color","activeLink","Navigation","to","exact","style","activeStyle","container","alignItems","avatar","marginRight","button","borderRadius","backgroundColor","UserMenu","dispatch","useDispatch","useSelector","type","onClick","AuthNav","header","justifyContent","borderBottom","AppBar","Container","children","className","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","HomePage","lazy","RegisterPage","LoginPage","ContactsPage","App","useEffect","fallback","path","contactItems","createReducer","filter","loadingProcess","pending","rejected","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","phonebookReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById"],"mappings":"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","file":"static/js/main.d19be636.chunk.js","sourcesContent":["import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n    set(token) {\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n    unset() {\n        axios.defaults.headers.common.Authorization = '';\n    },\n};\n\nconst register = createAsyncThunk('auth/register', async (credentials, { rejectWithValue }) => {\n    try {\n        const { data } = await axios.post('/users/signup', credentials);\n        token.set(data.token);\n        return data;\n    } catch (error) {\n        return rejectWithValue(error.message);\n    }\n});\n\n\nconst logIn = createAsyncThunk('auth/login', async (credentials, { rejectWithValue }) => {\n    try {\n        const { data } = await axios.post('/users/login', credentials);\n        token.set(data.token);\n        return data;\n    } catch (error) {\n        return rejectWithValue(error.message);\n    }\n});\n\nconst logOut = createAsyncThunk('auth/logout', async (credentials, { rejectWithValue }) => {\n    try {\n        await axios.post('/users/logout');\n        token.unset();\n    } catch (error) {\n        return rejectWithValue(error.message);\n    }\n});\n\nconst fetchCurrentUser = createAsyncThunk(\n    'auth/refresh',\n    async (_, thunkAPI) => {\n        const state = thunkAPI.getState();\n        const persistedToken = state.auth.token;\n\n        if (persistedToken === null) {\n\n            return thunkAPI.rejectWithValue();\n        }\n\n        token.set(persistedToken);\n        try {\n            const { data } = await axios.get('/users/current');\n            return data;\n        } catch (error) {\n            console.log(error)\n        }\n    },\n);\n\nconst operations = {\n    register,\n    logOut,\n    logIn,\n    fetchCurrentUser,\n};\nexport default operations;","const getIsLoggedIn = state => state.auth.isLoggedIn;\nconst getUsername = state => state.auth.user.name;\nconst getIsFetchingCurrent = state => state.auth.isFetchingCurrentUser;\n\nconst authSelectors = {\n    getIsLoggedIn,\n    getUsername,\n    getIsFetchingCurrent,\n};\nexport default authSelectors;","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operations';\n\nconst initialState = {\n    user: { name: null, email: null },\n    token: null,\n    isLoggedIn: false,\n};\n\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    extraReducers: {\n        [authOperations.register.fulfilled](state, action) {\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n            state.isLoggedIn = true;\n        },\n        [authOperations.logIn.fulfilled](state, action) {\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n            state.isLoggedIn = true;\n        },\n        [authOperations.logOut.fulfilled](state, action) {\n            state.user = { name: null, email: null };\n            state.token = null;\n            state.isLoggedIn = false;\n        },\n        [authOperations.fetchCurrentUser.fulfilled](state, action) {\n            state.user = action.payload;\n            state.isLoggedIn = true;\n        },\n    },\n});\n\nexport default authSlice.reducer;","\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nexport async function fetchContactsAPI() {\n    const { data } = await axios.get(`/contacts`);\n    return data;\n}\n\nexport async function addContactAPI(item) {\n    const { data } = await axios.post(`/contacts`, item);\n    return data;\n}\nexport async function deleteContactsAPI(id) {\n    const { data } = await axios.delete(`/contacts/${id}`);\n    return data;\n}\n\n\n\n\n\n","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport {\n    fetchContactsAPI,\n    addContactAPI,\n    deleteContactsAPI,\n} from '../services/contactApi';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nexport const fetchContacts = createAsyncThunk(\n    'contacts/fetchContacts',\n    async () => {\n        const contacts = await fetchContactsAPI();\n        return contacts;\n    },\n);\n\nexport const addContact = createAsyncThunk(\n    'contacts/addContact',\n    async result => {\n        const contacts = await addContactAPI(result);\n        return contacts;\n    },\n);\n\nexport const deleteContact = createAsyncThunk(\n    'contacts/deleteContact',\n    async id => {\n        await deleteContactsAPI(id);\n        return id;\n    },\n);","import { createAction } from '@reduxjs/toolkit';\n\nexport const fetchContactRequest = createAction('contacts/fetchContactRequest');\nexport const fetchContactSuccess = createAction('contacts/fetchContactSuccess');\nexport const fetchContactError = createAction('contacts/fetchContactError');\n\n\nexport const addContactRequest = createAction('contacts/addContactRequest');\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\nexport const addContactError = createAction('contacts/addContactError');\n\n\nexport const deleteContactRequest = createAction(\n    'contacts/deleteContactRequest',\n);\nexport const deleteContactSuccess = createAction(\n    'contacts/deleteContactSuccess',\n);\nexport const deleteContactError = createAction('contacts/deleteContactError');\n\n\nexport const changeFilter = createAction('phonebook/changeFilter');","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__2R2s3\"};","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst styles = {\n    link: {\n        display: 'inline-block',\n        textDecoration: 'none',\n        padding: 12,\n        fontWeight: 700,\n        color: '#E84A5F',\n    },\n    activeLink: {\n        color: \"#00ffff\",\n    },\n};\n\nconst Navigation = () => (\n    <nav>\n        <NavLink to=\"/\" exact style={styles.link} activeStyle={styles.activeLink}>\n            Home\n        </NavLink>\n    </nav>\n);\n\nexport default Navigation;","import { useDispatch, useSelector } from 'react-redux';\nimport { authSelectors, authOperations } from '../../redux/auth';\nimport { NavLink } from 'react-router-dom';\n\nconst styles = {\n    container: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    avatar: {\n        marginRight: 4,\n    },\n    name: {\n        fontWeight: 700,\n        marginRight: 12,\n        color:'#E84A5F',\n    },\n    link: {\n        display: 'inline-block',\n        textDecoration: 'none',\n        padding: 12,\n        fontWeight: 700,\n        color: '#E84A5F',\n    },\n    activeLink: {\n        color: \"#00ffff\",\n    },\n    button: {\n        borderRadius: 5,\n        padding: 3,\n        backgroundColor: '#e8ecec30',\n        color: \"#E84A5F\",\n    }\n};\n\nexport default function UserMenu() {\n    const dispatch = useDispatch();\n    const name = useSelector(authSelectors.getUsername);\n\n\n    return (\n        <div style={styles.container}>\n            <NavLink\n            to=\"/contacts\"\n            exact\n            style={styles.link}\n            activeStyle={styles.activeLink}\n        >\n            Contacts\n        </NavLink>\n            <span style={styles.name} >Wellcome, {name}</span>\n            <button type=\"button\" style={styles.button} onClick={() => dispatch(authOperations.logOut())}>\n                LogOut\n            </button>\n        </div>\n    );\n}","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst styles = {\n    link: {\n        display: 'inline-block',\n        textDecoration: 'none',\n        padding: 12,\n        fontWeight: 700,\n        color: '#E84A5F',\n    },\n    activeLink: {\n        color: '#00ffff', \n    },\n};\n\nexport default function AuthNav() {\n    return (\n        <div>\n            <NavLink\n                to=\"/register\"\n                exact\n                style={styles.link}\n                activeStyle={styles.activeLink}\n            >\n                Registration\n            </NavLink>\n            <NavLink\n                to=\"/login\"\n                exact\n                style={styles.link}\n                activeStyle={styles.activeLink}\n            >\n                LogIn\n            </NavLink>\n        </div>\n    );\n}","import { useSelector } from 'react-redux';\nimport Navigation from './Navigation';\nimport UserMenu from './UserMenu';\nimport AuthNav from './AuthNav';\nimport { authSelectors } from '../redux/auth';\n\nconst styles = {\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderBottom: '1px solid #2A363B',\n    },\n};\n\nexport default function AppBar() {\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n    return (\n        <header style={styles.header}>\n            <Navigation />\n            {isLoggedIn ? <UserMenu /> : <AuthNav />}\n        </header>\n    );\n}","import styles from './Container.module.css';\nimport PropTypes from \"prop-types\";\n\n\nexport default function Container({ children }) {\n    return <div className={styles.container}>{children}</div>;\n}\n\n\n\nContainer.propTypes = {\n    children: PropTypes.any,\n};","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authSelectors } from '../redux/auth';\n\nexport default function PrivateRoute({\n    children,\n    redirectTo = '/',\n    ...routeProps\n}) {\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n    return (\n        <Route {...routeProps}>\n            {isLoggedIn ? children : <Redirect to={redirectTo} />}\n        </Route>\n    );\n}","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authSelectors } from '../redux/auth';\n\nexport default function PublicRoute({\n    children,\n    restricted = false,\n    redirectTo = '/',\n    ...routeProps\n}) {\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n    const shouldRedirect = isLoggedIn && restricted;\n    return (\n        <Route {...routeProps}>\n            {shouldRedirect ? <Redirect to={redirectTo} /> : children}\n        </Route>\n    );\n}","import { useEffect, Suspense, lazy } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Switch } from 'react-router-dom';\nimport AppBar from './components/AppBar';\nimport Container from './components/Container';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport { authOperations, authSelectors } from './redux/auth';\n\n\nconst HomePage = lazy(() => import('./views/HomePage' /* webpackChunkName:\"HomePage\" */));\nconst RegisterPage = lazy(() => import('./views/RegisterPage' /* webpackChunkName:\"RegisterPage\" */));\nconst LoginPage = lazy(() => import('./views/LoginPage' /* webpackChunkName:\"LoginPage\" */));\nconst ContactsPage = lazy(() => import('./views/ContactsPage' /* webpackChunkName:\"ContactsPage\" */));\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrent);\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    <Container>\n      {isFetchingCurrentUser ? (\n        <h1>Показываем React Skeleton</h1>\n      ) : (\n        <>\n          <AppBar />\n          <Switch>\n            <Suspense fallback={<p>Загружаем...</p>}>\n              <PublicRoute exact path=\"/\">\n                <HomePage />\n              </PublicRoute>\n              <PublicRoute exact path=\"/register\" restricted>\n                <RegisterPage />\n              </PublicRoute>\n              <PublicRoute exact path=\"/login\" redirectTo=\"/contacts\" restricted>\n                <LoginPage />\n              </PublicRoute>\n              <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\n                <ContactsPage />\n              </PrivateRoute>\n              <PrivateRoute path=\"/upload\" redirectTo=\"/login\">\n\n              </PrivateRoute>\n            </Suspense>\n          </Switch>\n        </>\n      )}\n    </Container>\n  );\n}\n\n","\nimport { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { changeFilter } from './phonebook-actions';\nimport {\n    fetchContacts,\n    deleteContact,\n    addContact,\n} from '../Phonebook/phonebook-operation';\n\nexport const contactItems = createReducer([], {\n    [fetchContacts.fulfilled]: (_, { payload }) => payload,\n    [addContact.fulfilled]: (state, { payload }) => {\n        return [payload, ...state];\n    },\n    [deleteContact.fulfilled]: (state, { payload }) =>\n        state.filter(({ id }) => id !== payload),\n});\nconst filter = createReducer('', {\n    [changeFilter]: (_, { payload }) => payload,\n});\n\nexport const loadingProcess = createReducer(false, {\n    [fetchContacts.pending]: () => true,\n    [fetchContacts.fulfilled]: () => false,\n    [fetchContacts.rejected]: () => false,\n    [addContact.pending]: () => true,\n    [addContact.fulfilled]: () => false,\n    [addContact.rejected]: () => false,\n    [deleteContact.pending]: () => true,\n    [deleteContact.fulfilled]: () => false,\n    [deleteContact.rejected]: () => false,\n});\n\nexport default combineReducers({\n    contactItems,\n    filter,\n    loadingProcess,\n});\n\n\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport {\n    persistStore,\n    persistReducer,\n    FLUSH,\n    REHYDRATE,\n    PAUSE,\n    PERSIST,\n    PURGE,\n    REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport phonebookReducer from './Phonebook/phonebook-reducer';\nimport { authReducer } from './auth';\n\nconst middleware = [\n    ...getDefaultMiddleware({\n        serializableCheck: {\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n        },\n    }),\n];\n\nconst authPersistConfig = {\n    key: 'auth',\n    storage,\n    whitelist: ['token'],\n};\n\nexport const store = configureStore({\n    reducer: {\n        auth: persistReducer(authPersistConfig, authReducer),\n        contacts: phonebookReducer,\n    },\n    middleware,\n    devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './App';\nimport { store, persistor } from './redux/store';\nimport 'modern-normalize/modern-normalize.css';\nimport './styles/base.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);"],"sourceRoot":""}