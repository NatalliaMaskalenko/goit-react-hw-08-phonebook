(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{10:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return x}));var r=n(4),c=n.n(r),a=n(15),o=n(8),u=n.n(o),i=n(2);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var s,l=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){u.a.defaults.headers.common.Authorization=""},d=Object(i.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/signup",e);case 4:return a=t.sent,o=a.data,l(o.token),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(i.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/login",e);case 4:return a=t.sent,o=a.data,l(o.token),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(i.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/logout");case 4:b(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),p=Object(i.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(a),t.prev=5,t.next=8,u.a.get("/users/current");case 8:return o=t.sent,i=o.data,t.abrupt("return",i);case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:d,logOut:f,logIn:j,fetchCurrentUser:p},O={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},g=n(6),x=Object(i.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(s={},Object(g.a)(s,h.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(g.a)(s,h.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(g.a)(s,h.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(g.a)(s,h.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0})),s)}).reducer},17:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return O}));var r=n(4),c=n.n(r),a=n(15),o=n(8),u=n.n(o),i=n(2);function s(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/contacts",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.delete("/contacts/".concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}u.a.defaults.baseURL="https://connections-api.herokuapp.com",u.a.defaults.baseURL="https://connections-api.herokuapp.com";var p=Object(i.c)("contacts/fetchContacts",Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),h=Object(i.c)("contacts/addContact",function(){var t=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),O=Object(i.c)("contacts/deleteContact",function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},42:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2),c=(Object(r.b)("contacts/fetchContactRequest"),Object(r.b)("contacts/fetchContactSuccess"),Object(r.b)("contacts/fetchContactError"),Object(r.b)("contacts/addContactRequest"),Object(r.b)("contacts/addContactSuccess"),Object(r.b)("contacts/addContactError"),Object(r.b)("contacts/deleteContactRequest"),Object(r.b)("contacts/deleteContactSuccess"),Object(r.b)("contacts/deleteContactError"),Object(r.b)("phonebook/changeFilter"))},46:function(t,e,n){t.exports={container:"Container_container__2R2s3"}},82:function(t,e,n){},83:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(26),o=n.n(a),u=n(18),i=n(9),s=n(44),l=n(5),b=n(1),d={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#E84A5F"},activeLink:{color:"#00ffff"}},j=function(){return Object(b.jsx)("nav",{children:Object(b.jsx)(u.b,{to:"/",exact:!0,style:d.link,activeStyle:d.activeLink,children:"Home"})})},f=n(10),p={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12,color:"#E84A5F"},link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#E84A5F"},activeLink:{color:"#00ffff"},button:{borderRadius:5,padding:3,backgroundColor:"#e8ecec30",color:"#E84A5F"}};function h(){var t=Object(i.c)(),e=Object(i.d)(f.c.getUsername);return Object(b.jsxs)("div",{style:p.container,children:[Object(b.jsx)(u.b,{to:"/contacts",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Contacts"}),Object(b.jsxs)("span",{style:p.name,children:["Wellcome, ",e]}),Object(b.jsx)("button",{type:"button",style:p.button,onClick:function(){return t(f.a.logOut())},children:"LogOut"})]})}var O={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#E84A5F"},activeLink:{color:"#00ffff"}};function g(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.b,{to:"/register",exact:!0,style:O.link,activeStyle:O.activeLink,children:"Registration"}),Object(b.jsx)(u.b,{to:"/login",exact:!0,style:O.link,activeStyle:O.activeLink,children:"LogIn"})]})}var x={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function v(){var t=Object(i.d)(f.c.getIsLoggedIn);return Object(b.jsxs)("header",{style:x.header,children:[Object(b.jsx)(j,{}),t?Object(b.jsx)(h,{}):Object(b.jsx)(g,{})]})}var k=n(46),y=n.n(k);function m(t){var e=t.children;return Object(b.jsx)("div",{className:y.a.container,children:e})}var w=n(21),C=n(28),I=["children","redirectTo"];function L(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(C.a)(t,I),a=Object(i.d)(f.c.getIsLoggedIn);return Object(b.jsx)(l.b,Object(w.a)(Object(w.a)({},c),{},{children:a?e:Object(b.jsx)(l.a,{to:r})}))}var R=["children","restricted","redirectTo"];function S(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/":c,o=Object(C.a)(t,R),u=Object(i.d)(f.c.getIsLoggedIn)&&r;return Object(b.jsx)(l.b,Object(w.a)(Object(w.a)({},o),{},{children:u?Object(b.jsx)(l.a,{to:a}):e}))}var E=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,101))})),F=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,102))})),A=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,103))})),U=Object(r.lazy)((function(){return Promise.all([n.e(7),n.e(0)]).then(n.bind(null,104))}));function W(){var t=Object(i.c)(),e=Object(i.d)(f.c.getIsFetchingCurrent);return Object(r.useEffect)((function(){t(f.a.fetchCurrentUser())}),[t]),Object(b.jsx)(m,{children:e?Object(b.jsx)("h1",{children:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c React Skeleton"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{}),Object(b.jsx)(l.d,{children:Object(b.jsxs)(r.Suspense,{fallback:Object(b.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:[Object(b.jsx)(S,{exact:!0,path:"/",children:Object(b.jsx)(E,{})}),Object(b.jsx)(S,{exact:!0,path:"/register",restricted:!0,children:Object(b.jsx)(F,{})}),Object(b.jsx)(S,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(A,{})}),Object(b.jsx)(L,{path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(U,{})}),Object(b.jsx)(L,{path:"/upload",redirectTo:"/login"})]})})]})})}var T,z,B=n(27),V=n(2),q=n(19),D=n(47),_=n.n(D),J=n(6),P=n(7),H=n(42),M=n(17),N=Object(V.d)([],(T={},Object(J.a)(T,M.c.fulfilled,(function(t,e){return e.payload})),Object(J.a)(T,M.a.fulfilled,(function(t,e){return[e.payload].concat(Object(B.a)(t))})),Object(J.a)(T,M.b.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),T)),G=Object(V.d)("",Object(J.a)({},H.a,(function(t,e){return e.payload}))),K=Object(V.d)(!1,(z={},Object(J.a)(z,M.c.pending,(function(){return!0})),Object(J.a)(z,M.c.fulfilled,(function(){return!1})),Object(J.a)(z,M.c.rejected,(function(){return!1})),Object(J.a)(z,M.a.pending,(function(){return!0})),Object(J.a)(z,M.a.fulfilled,(function(){return!1})),Object(J.a)(z,M.a.rejected,(function(){return!1})),Object(J.a)(z,M.b.pending,(function(){return!0})),Object(J.a)(z,M.b.fulfilled,(function(){return!1})),Object(J.a)(z,M.b.rejected,(function(){return!1})),z)),Q=Object(P.b)({contactItems:N,filter:G,loadingProcess:K}),X=Object(B.a)(Object(V.f)({serializableCheck:{ignoredActions:[q.a,q.f,q.b,q.c,q.d,q.e]}})),Y={key:"auth",storage:_.a,whitelist:["token"]},Z=Object(V.a)({reducer:{auth:Object(q.g)(Y,f.b),contacts:Q},middleware:X,devTools:!1}),$=Object(q.h)(Z);n(81),n(82),n(48);o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(i.a,{store:Z,children:Object(b.jsx)(s.a,{loading:null,persistor:$,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(W,{})})})})}),document.getElementById("root"))}},[[83,5,6]]]);
//# sourceMappingURL=main.d19be636.chunk.js.map